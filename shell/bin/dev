#!/bin/bash

mkdir -p /private/tmp/tmux-502

if [ $# -eq 0 ]
then
	session_name="dev"
else
	session_name=$1
fi

if [ ! -z $1 ] && [ -f "$HOME/.dot_files/tmux/$1.conf" ]
then
	conf_path="$HOME/.dot_files/tmux/$1.conf"
else
	conf_path="$HOME/.dot_files/tmux/dev.conf"
fi

tmux new-session -s $session_name -d
# The session isn't ready to accept keys right away. Waiting 1 second fixes the issue.
sleep 1
tmux send-keys -t "${session_name}:1" "tmux source-file $conf_path" C-m "clear" C-m
tmux attach -t $session_name
